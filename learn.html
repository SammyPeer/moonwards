<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Moonwards</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#000000">
      <link rel="stylesheet" href="normalize.css">
      <link rel="stylesheet" href="main.css">
		<link rel="stylesheet" href="cssportal.tooltip.css">
<link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,400italic,600,200'
rel='stylesheet' type='text/css'>
<style>
	input, button {
	color: black;
	}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.3.min.js"><\/script>')</script>
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
<script src="js/vendor/modernizr-2.8.3.min.js"></script>
<script src="js/jquery.tooltipster.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
    </head>
    <body>
    <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TN8NFC"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TN8NFC');</script>
<!-- 'End Google Tag Manager -->
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. 
            Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
	<header>
	<a href="index.html" style="background-color:transparent;">
	<img src="http://www.moonwards.com/img/MWLogo-for-black-bckgnd.svg" alt="Moonwards logo" id="logo">
	</a>
	  	<nav>
	  	<div id="nav">
  		<ul>
  			<li><a href="index.html">the VMC</a>
  				<ul>
  					<li><a href="index.html#colony">Colony Phase 1</a>
  					</li>
  					<li><a href="index.html#mission1">Mission 1</a>
  					</li>
  					<li><a href="index.html#mission2">Mission 2</a>
  					</li>
  				</ul>
  			</li>
  			<li><a href="planning.html">Plan</a>
  				<ul>
  					<li><a href="planning.html#equipment">Equipment</a></li>
  					<li><a href="planning.html#structures">Structures</a></li>
  					<li><a href="planning.html#environment">Environment</a></li>
  				</ul>
  			</li>
  			<li><a href="learn.html">Learn</a>
  				<ul>
  					<li><a href="learn.html#calculators">Calculators</a></li>
  				</ul>
  			<li><a href="about.html">Why</a>
  				<ul>
  					<li><a href="about.html#plans">Plans Today</a></li>
  					<li><a href="about.html#about">About Us</a></li>
  				</ul>
  			</li>
  			<li><a href="http://www.moonwards.com/forum/">Forum</a></li>
  		</ul>
  		</div>
  	</nav>
	</header>
<div id="container">
    <div class="rowR" id="calculators">
            <h2 class="col-3 col-m-4">Calculators</h2>
    </div>
	<div class="rowR">
                <div class="black roundAll">
                    <div class="darkYellow pad15 roundAll">
                        <h4>The Rocket Equation</h4><br>
                        <p style="padding:0;">Mass ratio:</p>
                        <input type="text" placeholder="Start mass divided by end mass" value="" id="massratioRE">
                        <p style="padding:0;">Exhaust velocity: (m/s)</p>
                        <input type="text" placeholder="Velocity of the rocket exhaust" value="" id="exhaustvelocityRE">
                        &nbsp;
                        <input type="checkbox" id="ispcheckboxRE"> &nbsp; use Isp instead
                        <br><br>
                        <button onclick="rocket()">Calculate!</button><br>
                        <p style="padding:0;" id="resultRE">&nbsp;</p>
                    </div>
                </div>
                <div class="black roundAll">
                    <div class="darkYellow pad15 roundAll">
                        <h4>Suborbital Hop</h4><br>
                        <p style="padding:0;">Initial location:</p>
                        <span>Latitude</span> <input type="text" placeholder="(degrees)" value="" id="latitudeSH">
                        <span>Longitude</span> <input type="text" placeholder="(degrees)" value="" id="longitudeSH">
                        <p style="padding:0;">Destination location:</p>
                        <span>Latitude</span> <input type="text" placeholder="(degrees)" value="" id="destinationlatitudeSH">
                        <span>Longitude</span> <input type="text" placeholder="(degrees)" value="" id="destinationlongitudeSH">
                        <br>
                        <div class="noFloat">
                            <img class="realsize" src="mapmini.gif">
                            <img class="realsize icons" style="position: absolute; top: 54px; left: 118px;"
                            src="icon.png" id="initialicon">
                            <img class="realsize icons" src="icon.png" 
                            style="position: absolute; top: 54px; left: 118px;"
                            id="destinationicon">
                        </div>
                        <br><br>
                        <button onclick="subhop()">Calculate!</button><br>
                        <p id="resultSH">&nbsp;</p>
                        <p>More about suborbital hops 
                        <a href="http://hopsblog-hop.blogspot.com/2015/08/lunar-pogo-hopper.html">here</a>, by Hop David.</p>
                    </div>
                </div>
                <div class="black roundAll">
                    <div class="darkYellow pad15 roundAll">
                      <h4>Lunar Elevator</h4><br>
                        <p>Start distance: (distances are from the centre of the Moon towards Earth)</p>
                        <input type="text" placeholder="(km)" value="" id="start">
                        <input type="checkbox" id="surface">use lunar surface
                        <br>
                        <p>End distance</p>
                        <input type="text" placeholder="(km)" value="" id="end">
                        <input type="checkbox" id="eml1">use EML1
                        <br>
                        <p>Material strength:</p>
                        <input type="text" placeholder="(Yuri)" value="" id="material">
                        <input type="checkbox" id="zylon">use Zylon
                        <br><br>
                        <button onclick="tether()">Calculate!</button>
                        <p id="resultLE">&nbsp;</p>
                        <p id="resultLE2">&nbsp;</p>
                    </div>
                </div>
            <div class="col-12 col-m-12">     
                <a href="http://www.wtfpl.net/">
                    <img class="realsize" src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"  
                   alt="WTFPL"/>
                </a>
            </div>
    </div>
</div>
<script>
//Just move the script to a sepparate file if you want.
//Global stuff, here be dragons
idIcon = 0;
//A few values that are used a lot:
g = 9.80665; //m/s^2
moonRadius = 1738000; //m
moonGparameter = 4904869590000; //G*M
earthGparameter = 398600441890000; //G*m
EMdistance = 384400000;
eml1DistanceFromTheMoon = 58730214;
//Common opperations:
rad = function(degrees){ //for converting to radians
  return degrees/180 * Math.PI;
};
toXYZ = function(long,lat){//transform coordinates from angular to cartesian
  x = Math.cos(rad(long)) * Math.cos(rad(lat)) * moonRadius;
  y = Math.sin(rad(long)) * Math.cos(rad(lat)) * moonRadius;
  z = Math.sin(rad(lat)) * moonRadius;
  return [x,y,z];
};
integralCall = function(dist,jst){
  return - dist*dist/2 + dist * (1 - jst) - jst/Math.abs(dist) + (1 - jst)/(-Math.abs(dist - 1));
};
//main functions:
rocket = function(){
  var ispcheck = document.getElementById("ispcheckboxRE").checked;
  var just = 1;
  if(ispcheck){just = g};
  var exhaust = Number(document.getElementById("exhaustvelocityRE").value);
  var massratio = Number(document.getElementById("massratioRE").value);
  var result = Math.log(massratio) * exhaust * just;
  result = Math.round(result*100)/100;
  document.getElementById("resultRE").innerHTML = "Delta-v: <b>" + result + " m/s</b>";
};
subhop = function(){
//inputs
  var longitude1 = (Number(document.getElementById("longitudeSH").value))%360; //connect to input forms or whatever
    if(longitude1 < -180){longitude1 += 360}else if(longitude1 > 180){longitude1 -= 360};
  var latitude1 = (Number(document.getElementById("latitudeSH").value))%360;
  var longitude2 = (Number(document.getElementById("destinationlongitudeSH").value))%360;
    if(longitude2 < -180){longitude2 += 360}else if(longitude2 > 180){longitude2 -= 360};
  var latitude2 = (Number(document.getElementById("destinationlatitudeSH").value))%360;
//main
  var cords1 = toXYZ(longitude1,latitude1);
  var cords2 = toXYZ(longitude2,latitude2);
  var distance = Math.sqrt(Math.pow(cords1[0] - cords2[0],2) + Math.pow(cords1[1] - cords2[1],2) + Math.pow(cords1[2] - cords2[2],2));
  var semimajor = moonRadius/2 + distance/4;
//output
  var totalDeltav = 2*Math.sqrt(moonGparameter * (2/moonRadius - 1/semimajor));
  totalDeltav = Math.round(totalDeltav*100)/100;
  document.getElementById("resultSH").innerHTML = "Delta-v: <b>" + totalDeltav + " m/s</b> ("+Math.round((totalDeltav/3359.84)*100)+"% of an orbital mission)";
//optional:  distance (not implemented)
//graphics:
  var xcoord1 = (longitude1 - 180)*256/360;
  var ycoord1 = (90 - latitude1)*128/180;
  var xcoord2 = (longitude2 - 180)*256/360;
  var ycoord2 = (90 - latitude2)*128/180;
  document.getElementById("initialicon").style.left = xcoord1+"px";
  document.getElementById("initialicon").style.top = ycoord1+"px";
  document.getElementById("destinationicon").style.left = xcoord2+"px";
  document.getElementById("destinationicon").style.lop = ycoord2+"px";
};
tether = function(){
  var surfacecheck = document.getElementById("surface").checked;
  var eml1check = document.getElementById("eml1").checked;
  var zyloncheck = document.getElementById("zylon").checked;
  var startaltitude = Number(document.getElementById("start").value);
  var endaltitude = Number(document.getElementById("end").value);
  var strength = Number(document.getElementById("material").value);
  if(surfacecheck){
    startaltitude = moonRadius;
    document.getElementById("start").value = moonRadius/1000;
  }
  else{
    startaltitude = startaltitude * 1000;
  };
  if(eml1check){
    endaltitude = eml1DistanceFromTheMoon;
    document.getElementById("end").value = eml1DistanceFromTheMoon/1000;
  }
  else{
    endaltitude = endaltitude * 1000;
  };
  if(zyloncheck){
    strength = 3720000;
    document.getElementById("material").value = 3720000;
  }
  var SCALEstart = startaltitude/EMdistance;
  var SCALEend = endaltitude/EMdistance;
  var jStMaSsRaTiO = moonGparameter/(moonGparameter + earthGparameter);
  var firstPoint = integralCall(SCALEstart,jStMaSsRaTiO);
  var secondPoint = integralCall(SCALEend,jStMaSsRaTiO);
  var resultLE = (secondPoint - firstPoint) * (earthGparameter + moonGparameter)/EMdistance;
  var resultLE2 = Math.pow(Math.E,resultLE/strength);
  resultLE = Math.round(resultLE*100)/100;
  resultLE2 = Math.round(resultLE2*1000)/1000;
  document.getElementById("resultLE").innerHTML = "Acceleration potential: <b>"+resultLE+"</b> Yuri";
  document.getElementById("resultLE2").innerHTML = "Taper ratio: <b>"+resultLE2+"</b>";
};
</script>
    </body>
</html>
